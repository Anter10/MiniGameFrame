{"version":3,"sources":["physics-bound.js"],"names":["cc","Class","extends","Component","properties","size","mouseJoint","onLoad","width","node","height","Node","body","addComponent","RigidBody","type","RigidBodyType","Static","joint","MouseJoint","mouseRegion","_addBound","parent","physicsManager","director","getPhysicsManager","enabled","gravity","v2","debugDrawFlags","PhysicsManager","DrawBits","e_jointBit","e_shapeBit","console","log","x","y","getCollisionManager","enabledDebugDraw","collider","PhysicsBoxCollider","offset"],"mappings":";;;;;;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,cAAML,GAAGK,IAAH,CAAQ,CAAR,EAAW,CAAX,CADE;AAERC,oBAAY;AAFJ,KAHP;;AAQL;AACAC,YAAQ,kBAAY;AAChB,YAAIC,QAAU,KAAKH,IAAL,CAAUG,KAAV,IAAmB,KAAKC,IAAL,CAAUD,KAA3C;AACA,YAAIE,SAAU,KAAKL,IAAL,CAAUK,MAAV,IAAoB,KAAKD,IAAL,CAAUC,MAA5C;;AAEA,YAAID,OAAO,IAAIT,GAAGW,IAAP,EAAX;;AAEA,YAAIC,OAAOH,KAAKI,YAAL,CAAkBb,GAAGc,SAArB,CAAX;AACAF,aAAKG,IAAL,GAAYf,GAAGgB,aAAH,CAAiBC,MAA7B;;AAEA,YAAI,KAAKX,UAAT,EAAqB;AACjB;AACA,gBAAIY,QAAQT,KAAKI,YAAL,CAAkBb,GAAGmB,UAArB,CAAZ;AACAD,kBAAME,WAAN,GAAoB,KAAKX,IAAzB;AACH;;AAED;AACA,aAAKY,SAAL,CAAeZ,IAAf,EAAqB,CAArB,EAAwBC,SAAO,CAA/B,EAAkCF,QAAQ,CAA1C,EAA6C,EAA7C;AACA;AACA,aAAKa,SAAL,CAAeZ,IAAf,EAAqB,CAArB,EAAwB,CAACC,MAAD,GAAQ,CAAhC,EAAmCF,KAAnC,EAA0C,EAA1C;AACA;AACA,aAAKa,SAAL,CAAeZ,IAAf,EAAqB,CAACD,KAAD,GAAO,CAA5B,EAA+B,CAA/B,EAAkC,EAAlC,EAAsCE,MAAtC;AACA;AACA,aAAKW,SAAL,CAAeZ,IAAf,EAAqBD,QAAM,CAA3B,EAA8B,CAA9B,EAAiC,EAAjC,EAAqCE,MAArC;;AAEA,aAAKW,SAAL,CAAeZ,IAAf,EAAqBD,QAAQ,CAA7B,EAAgC,GAAhC,EAAqC,EAArC,EAAyCE,MAAzC;;AAEAD,aAAKa,MAAL,GAAc,KAAKb,IAAnB;AACA,YAAIc,iBAAiBvB,GAAGwB,QAAH,CAAYC,iBAAZ,EAArB;AACAF,uBAAeG,OAAf,GAAyB,IAAzB;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAKC,OAAL,GAAeJ,eAAeI,OAA9B;AACAJ,uBAAeI,OAAf,GAAyB3B,GAAG4B,EAAH,CAAM,CAAN,EAAQ,CAAC,CAAT,CAAzB;AACAL,uBAAeM,cAAf;AACI;AACA;AACA7B,WAAG8B,cAAH,CAAkBC,QAAlB,CAA2BC,UAA3B,GACAhC,GAAG8B,cAAH,CAAkBC,QAAlB,CAA2BE,UAJ/B;;AAMAC,gBAAQC,GAAR,CAAY,WAAW3B,KAAX,GAAmB,UAAnB,GAAgCE,MAAhC,GACR,eADQ,GACU,KAAKiB,OAAL,CAAaS,CADvB,GAC2B,KAD3B,GACmC,KAAKT,OAAL,CAAaU,CAD5D;AAEArC,WAAGwB,QAAH,CAAYc,mBAAZ,GAAkCC,gBAAlC,GAAqD,IAArD;AACH,KA5DI;;AA8DLlB,aA9DK,qBA8DMZ,IA9DN,EA8DY2B,CA9DZ,EA8DeC,CA9Df,EA8DkB7B,KA9DlB,EA8DyBE,MA9DzB,EA8DiC;AAClC,YAAI8B,WAAW/B,KAAKI,YAAL,CAAkBb,GAAGyC,kBAArB,CAAf;AACAD,iBAASE,MAAT,CAAgBN,CAAhB,GAAoBA,CAApB;AACAI,iBAASE,MAAT,CAAgBL,CAAhB,GAAoBA,CAApB;AACAG,iBAASnC,IAAT,CAAcG,KAAd,GAAsBA,KAAtB;AACAgC,iBAASnC,IAAT,CAAcK,MAAd,GAAuBA,MAAvB;AACH;AApEI,CAAT","file":"physics-bound.js","sourceRoot":"../../../../assets/PhyFrame","sourcesContent":["\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        size: cc.size(0, 0),\n        mouseJoint: true\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        let width   = this.size.width || this.node.width;\n        let height  = this.size.height || this.node.height;\n\n        let node = new cc.Node();\n\n        let body = node.addComponent(cc.RigidBody);\n        body.type = cc.RigidBodyType.Static;\n\n        if (this.mouseJoint) {\n            // add mouse joint\n            let joint = node.addComponent(cc.MouseJoint);\n            joint.mouseRegion = this.node;    \n        }\n        \n        // 上\n        this._addBound(node, 0, height/2, width / 2, 10);\n        // 下\n        this._addBound(node, 0, -height/2, width, 10);\n        // 左\n        this._addBound(node, -width/2, 0, 10, height);\n        // 右\n        this._addBound(node, width/2, 0, 10, height );\n        \n        this._addBound(node, width / 2, 450, 10, height);\n        \n        node.parent = this.node;\n        var physicsManager = cc.director.getPhysicsManager();\n        physicsManager.enabled = true;\n\n        // let physicsManager = cc.director.getPhysicsManager();\n        // physicsManager.enabled = true;\n\n        // physicsManager.debugDrawFlags = \n        //     // 0;\n        //     cc.PhysicsManager.DrawBits.e_aabbBit |\n        //     cc.PhysicsManager.DrawBits.e_jointBit |\n        //     cc.PhysicsManager.DrawBits.e_shapeBit\n        //     ;\n        // physicsManager.enabledAccumulator = true;\n        this.gravity = physicsManager.gravity;\n        physicsManager.gravity = cc.v2(0,-5);\n        physicsManager.debugDrawFlags =\n            // 0;\n            // cc.PhysicsManager.DrawBits.e_aabbBit |\n            cc.PhysicsManager.DrawBits.e_jointBit |\n            cc.PhysicsManager.DrawBits.e_shapeBit;\n\n        console.log(\"width \" + width + \" height \" + height +\n            \" gravity x = \" + this.gravity.x + \" y \" + this.gravity.y);\n        cc.director.getCollisionManager().enabledDebugDraw = true; \n    },\n\n    _addBound (node, x, y, width, height) {\n        let collider = node.addComponent(cc.PhysicsBoxCollider);\n        collider.offset.x = x;\n        collider.offset.y = y;\n        collider.size.width = width;\n        collider.size.height = height;\n    }\n});\n"]}